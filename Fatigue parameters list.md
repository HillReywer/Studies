# Полный технический список параметров для отслеживания усталости

## ПРИОРИТЕТ 1: Критически важные параметры (Обязательные)

### 1. Heart Rate Variability (HRV) - Вариабельность сердечного ритма

#### 1.1 RMSSD (Root Mean Square of Successive Differences)
**Формула:**
```
RMSSD = √[(1/(N-1)) × Σ(i=1 to N-1)(RRᵢ₊₁ - RRᵢ)²]
```
- **Единицы:** миллисекунды (мс)
- **Нормальный диапазон:** 20-100 мс (зависит от возраста)
- **Частота измерения:** Каждые 5 минут в покое
- **Интерпретация:** ↓ RMSSD = ↑ усталость/стресс
- **Минимальные требования:** 250 точек R-R интервалов

#### 1.2 SDNN (Standard Deviation of NN intervals)
**Формула:**
```
SDNN = √[(1/(N-1)) × Σ(i=1 to N)(RRᵢ - RR̄)²]
```
- **Единицы:** миллисекунды (мс)
- **Нормальный диапазон:** 50-150 мс
- **Окно измерения:** 5 минут (краткосрочное) или 24 часа (долгосрочное)
- **Интерпретация:** ↓ SDNN = ↓ общая вариабельность = ↑ усталость

#### 1.3 pNN50 (Percentage of successive RR intervals differing by >50ms)
**Формула:**
```
pNN50 = (количество |RRᵢ₊₁ - RRᵢ| > 50мс / общее количество интервалов) × 100%
```
- **Единицы:** проценты (%)
- **Нормальный диапазон:** 5-40%
- **Интерпретация:** ↓ pNN50 = ↓ парасимпатическая активность

### 2. Heart Rate (HR) - Частота сердечных сокращений

#### 2.1 Resting Heart Rate (RHR)
**Формула:**
```
RHR = 60 / mean(RR интервалы в покое)
```
- **Единицы:** уд/мин (bpm)
- **Нормальный диапазон:** 50-80 уд/мин
- **Время измерения:** Утром после пробуждения, лежа
- **Интерпретация:** ↑ RHR на 5-10 уд/мин = возможная усталость

#### 2.2 Heart Rate Recovery (HRR)
**Формула:**
```
HRR₁ = HR_peak - HR_1min_after
HRR₂ = HR_peak - HR_2min_after

Экспоненциальная модель:
HR(t) = HR_rest + (HR_peak - HR_rest) × e^(-t/τ)
```
- **Единицы:** уд/мин
- **Нормальные значения:** HRR₁ > 12 уд/мин, HRR₂ > 22 уд/мин
- **Интерпретация:** ↓ HRR = ↓ восстановление = ↑ усталость

### 3. Sleep Metrics - Параметры сна

#### 3.1 Sleep Efficiency
**Формула:**
```
Sleep_Efficiency = (Total_Sleep_Time / Time_In_Bed) × 100%
```
- **Единицы:** проценты (%)
- **Целевой диапазон:** > 85%
- **Расчет:** На основе акселерометра + HR

#### 3.2 Sleep Debt
**Формула:**
```
Sleep_Debt = Σ(i=1 to 14)(Recommended_Sleep - Actual_Sleep)ᵢ / 14
```
- **Единицы:** часы
- **Критический порог:** > 2 часа
- **Окно расчета:** Последние 14 дней

#### 3.3 Sleep Stages Distribution
**Детекция через HRV + движение:**
```
Deep_Sleep_% = (Deep_Sleep_Time / Total_Sleep_Time) × 100%
REM_Sleep_% = (REM_Sleep_Time / Total_Sleep_Time) × 100%
Light_Sleep_% = (Light_Sleep_Time / Total_Sleep_Time) × 100%
```
- **Целевые значения:** Deep: 15-20%, REM: 20-25%, Light: 50-60%

### 4. Activity Load - Физическая нагрузка

#### 4.1 Training Load (TRIMP - Training Impulse)
**Формула:**
```
TRIMP = Duration × HR_avg × 0.64 × e^(1.92 × HR_ratio)
где HR_ratio = (HR_avg - HR_rest) / (HR_max - HR_rest)
```
- **Единицы:** условные единицы
- **Интерпретация:** Накопленная нагрузка за тренировку

#### 4.2 Acute:Chronic Workload Ratio (ACWR)
**Формула:**
```
ACWR = Acute_Load (7 дней) / Chronic_Load (28 дней)
```
- **Оптимальный диапазон:** 0.8-1.3
- **Риск травмы:** > 1.5
- **Недотренированность:** < 0.8

### 5. Respiratory Rate - Частота дыхания

**Формула извлечения из PPG:**
```
RR = FFT_peak_frequency(respiratory_component) × 60
где respiratory_component = bandpass_filter(PPG_signal, 0.1-0.5 Hz)
```
- **Единицы:** вдохов/мин
- **Норма в покое:** 12-20 вдохов/мин
- **Повышение:** +3-5 вдохов/мин может указывать на усталость

## ПРИОРИТЕТ 2: Важные дополнительные параметры

### 6. HRV Frequency Domain - Частотный анализ

#### 6.1 LF/HF Ratio
**Формула:**
```
LF_power = ∫(0.04-0.15 Hz) PSD(f) df
HF_power = ∫(0.15-0.4 Hz) PSD(f) df
LF/HF_ratio = LF_power / HF_power
```
- **Нормальный диапазон:** 0.5-2.0
- **Интерпретация:** ↑ LF/HF = ↑ симпатическая активность = стресс/усталость

#### 6.2 Total Power
**Формула:**
```
TP = ∫(0.003-0.4 Hz) PSD(f) df
```
- **Единицы:** мс²
- **Интерпретация:** ↓ TP = ↓ общая адаптивность

### 7. Movement Analysis - Анализ движения

#### 7.1 Activity Counts
**Формула:**
```
Activity_Count = Σ|acceleration_magnitude - 1g| × sampling_rate
```
- **Единицы:** counts/min
- **Использование:** Классификация уровня активности

#### 7.2 Step Cadence Variability
**Формула:**
```
CV_cadence = (SD_cadence / mean_cadence) × 100%
```
- **Интерпретация:** ↑ вариабельность = ↑ усталость при ходьбе

### 8. Circadian Rhythm Parameters

#### 8.1 Mesor (средний уровень)
**Формула:**
```
HR_circadian(t) = Mesor + Amplitude × cos(2π(t - Acrophase)/24)
```
- **Параметры:** Извлекаются через косинор-анализ
- **Интерпретация:** Сдвиг акрофазы = нарушение циркадных ритмов

### 9. Composite Scores - Комплексные показатели

#### 9.1 Body Battery (Garmin-style)
**Формула:**
```
Battery(t) = Battery(t-1) + Recovery_rate - Drain_rate

где:
Recovery_rate = f(HRV, sleep_quality, rest_time)
Drain_rate = g(stress_level, activity_intensity)
```
- **Диапазон:** 0-100
- **Скорость восстановления:** ~4-8 единиц/час в покое

#### 9.2 Readiness Score (Oura-style)
**Формула:**
```
Readiness = w₁×HRV_score + w₂×Sleep_score + w₃×Activity_balance + w₄×Temperature_score

где веса: w₁=0.35, w₂=0.35, w₃=0.20, w₄=0.10
```

## ПРИОРИТЕТ 3: Продвинутые параметры

### 10. Нелинейные HRV метрики

#### 10.1 Sample Entropy (SampEn)
**Формула:**
```
SampEn(m,r,N) = -ln[Cₘ₊₁(r)/Cₘ(r)]
```
- **Параметры:** m=2, r=0.2×SDNN
- **Интерпретация:** ↓ SampEn = ↓ сложность = ↑ усталость

#### 10.2 DFA α1 (Detrended Fluctuation Analysis)
**Формула:**
```
F(n) ∝ n^α
α1 для n = 4-16 beats
```
- **Норма:** α1 ≈ 1.0
- **Интерпретация:** α1 < 0.75 указывает на усталость

### 11. Температурные показатели

#### 11.1 Skin Temperature Variability
**Формула:**
```
Temp_deviation = |Temp_current - Temp_baseline_circadian|
```
- **Единицы:** °C
- **Порог:** отклонение > 0.5°C может указывать на стресс

### 12. Производные метрики

#### 12.1 HRV Slope (тренд)
**Формула:**
```
HRV_slope = β из линейной регрессии: RMSSD = α + β×день
```
- **Окно:** 7-14 дней
- **Интерпретация:** Отрицательный наклон = накопление усталости

## ДОПОЛНИТЕЛЬНЫЕ ВОЗМОЖНОСТИ (с продвинутыми датчиками)

### A. SpO2 (Сатурация кислорода)
**Требования:** Красный + инфракрасный LED
```
SpO2 = (AC_red/DC_red) / (AC_ir/DC_ir) × калибровочный_коэффициент
```
- **Норма:** 95-100%
- **Применение:** Детекция апноэ, высотная адаптация

### B. Электродермальная активность (EDA)
**Требования:** Датчики проводимости кожи
```
SCR_amplitude = max(EDA) - baseline_EDA
SCR_frequency = количество_пиков / время
```
- **Применение:** Эмоциональный стресс, ментальная нагрузка

### C. Core Body Temperature
**Требования:** Специальные температурные датчики
```
Circadian_amplitude = (Temp_max - Temp_min) / 2
Phase_shift = Acrophase_current - Acrophase_normal
```

## КАЛИБРОВКА И ПЕРСОНАЛИЗАЦИЯ

### Установление базовых линий
**Минимальный период:** 14 дней
**Формула адаптации:**
```
Baseline_personal = α × Baseline_population + (1-α) × Individual_mean
где α = 1/(1 + days_of_data/7)
```

### Z-score нормализация
**Для всех метрик:**
```
Z_score = (Value_current - Mean_personal) / SD_personal
```
- **Интерпретация:** |Z| > 2 = значимое отклонение

### Весовые коэффициенты для комбинированной оценки
```
Fatigue_Score = Σwᵢ × normalize(parameterᵢ)

Рекомендуемые веса:
- HRV (RMSSD): 0.30
- Sleep Quality: 0.25
- Activity Load: 0.20
- Recovery metrics: 0.15
- Other parameters: 0.10
```

## ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ

### Частота дискретизации
- **PPG сигнал:** минимум 25 Hz, оптимально 100-250 Hz
- **Акселерометр:** 50-100 Hz
- **Температура:** 1 Hz

### Точность измерений
- **R-R интервалы:** ±5 мс
- **HR:** ±2 уд/мин
- **Движение:** 12-bit разрешение минимум

### Энергопотребление
- **Непрерывный HRV мониторинг:** ~10-15 мА
- **Периодические измерения:** ~2-5 мА средний ток